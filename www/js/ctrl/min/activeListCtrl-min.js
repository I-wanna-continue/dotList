app.controller("activeListCtrl",function(e,t){e.db=new PouchDB("dotlist"),e.title="",e.serchword="",e.menuHandler="menu-bar",e.hamburgerHandler="hamburger",e.currentTask=0,e.selectedList=[],e.init=function(){e.getItems()},e.completeTask=function(t){e.selectedList[t].complete=e.selectedList[t].complete?!1:!0,console.log(t),e.selectedList[t].complete?e.currentTask--:e.currentTask++,e.saveItems()},e.deleteItem=function(t){confirm("Are you sure you want to delete "+e.selectedList[t].title+"?")&&(e.selectedList.splice(t,1),e.currentTask--),e.saveItems()},e.addItem=function(){e.selectedList.push({id:e.selectedList.length+1,title:e.itemTitle,complete:!1}),e.itemTitle="",e.currentTask++,e.saveItems()},e.menuAction=function(){"menu-bar"==e.menuHandler?(e.menuHandler="menu-bar-open",e.hamburgerHandler="hamburger-open"):(e.menuHandler="menu-bar",e.hamburgerHandler="hamburger")},e.search=function(){$(".search-bar").slideToggle("slow")},e.openModal=function(){$("#overlay").fadeIn().find(".modalen").fadeIn(),e.menuAction()},e.closeModal=function(){$("#overlay").fadeOut().find(".modalen").fadeOut()},e.getItems=function(){e.db.get("lists").then(function(s){console.log(s.lists);for(var n=0;n<s.lists.length;n++)s.lists[n].id==t.id&&e.$apply(function(){e.title=s.lists[n].title,e.selectedList=s.lists[n].items});for(var n=0;n<e.selectedList.length;n++)0==e.selectedList[n].complete&&e.currentTask++})},e.saveItems=function(){e.db.get("lists").then(function(s){for(var n=0;n<s.lists.length;n++)s.lists[n].id==t.id&&(s.lists[n].items=e.selectedList);return e.db.put({_id:s._id,_rev:s._rev,lists:s.lists})})}});