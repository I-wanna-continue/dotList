app.controller("listCtrl",["$scope","ajaxFactory",function(t,e){t.db=new PouchDB("dotlist"),t.allLists=[],t.list=[],t.loading=!1,t.listTitle="",t.menuHandler="menu-bar",t.hamburgerHandler="hamburger",t.listOptions=function(t){console.log($(t.target).parent().find(".list-options")),$(t.target).parent().parent().find(".list-options").slideToggle().css("display","flex")},t.deleteList=function(e){confirm("Are you sure you want to delete "+t.allLists[e].title+"?")&&(t.allLists.splice(e,1),t.saveLists())},t.init=function(){t.db.info().then(function(e){0==e.doc_count&&t.db.put({_id:"lists",lists:[]})}),t.getLists()},t.addItem=function(){t.list.push({id:t.list.length+1,title:t.itemTitle,complete:!1}),t.itemTitle=""},t.deleteItem=function(e){confirm("Are you sure you want to delete "+t.list[e].title+"?")&&t.list.splice(e,1)},t.checkItem=function(e){t.list[e].complete=t.list[e].complete?!1:!0},t.refresh=function(){var n=t.loading;n=!0,e.ajax({data:{user_id:$.cookie("userId")},method:"POST",url:"/AjaxGetLists"},function(t){console.log(JSON.parse(t)),n=!1},function(){})},t.createList=function(){t.allLists.push({title:t.listTitle,items:t.list,id:t.allLists.length+1}),e.ajax({data:{listname:t.listTitle,owner:$.cookie("userId"),items:JSON.stringify(t.list)},method:"POST",url:"/AjaxPostList"},function(t){console.log(t)},function(){}),console.log(t.allLists),t.list=[],t.listTitle="",$("#overlay").hide(),$(".modalen").hide(),t.saveLists()},t.menuAction=function(){"menu-bar"==t.menuHandler?(t.menuHandler="menu-bar-open",t.hamburgerHandler="hamburger-open"):(t.menuHandler="menu-bar",t.hamburgerHandler="hamburger")},t.search=function(){$(".search-bar").slideToggle("slow")},t.openModal=function(){$("#overlay").fadeIn().find(".modalen").fadeIn()},t.closeModal=function(){$("#overlay").fadeOut().find(".modalen").fadeOut()},t.getLists=function(){t.db.get("lists").then(function(e){console.log(e.lists),t.$apply(function(){t.allLists=e.lists})})},t.saveLists=function(){t.db.get("lists").then(function(e){return t.db.put({_id:e._id,_rev:e._rev,lists:t.allLists})})},t.flipped=!1,t.flip=function(t){"1"==$(t.target).parent().parent().parent().parent().find(".flipped").html()?($(t.target).parent().parent().parent().css({transform:"rotateX(0deg)"}),$(t.target).parent().parent().parent().parent().find(".flipped").html("0")):($(t.target).parent().parent().parent().css({transform:"rotateX(180deg)"}),$(t.target).parent().parent().parent().parent().find(".flipped").html("1"))}}]);